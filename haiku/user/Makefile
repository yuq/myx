#!makefile

########################################################################
# makefile config
########################################################################
V ?= @

export V

########################################################################
# compile tools
########################################################################

CROSS_PREFIX :=

CXX         := $(CROSS_PREFIX)g++
CC			:= $(CROSS_PREFIX)g++
AS      	:= $(CROSS_PREFIX)g++
LD			:= $(CROSS_PREFIX)g++
NM      	:= $(CROSS_PREFIX)nm
OBJCOPY 	:= $(CROSS_PREFIX)objcopy
OBJDUMP 	:= $(CROSS_PREFIX)objdump

########################################################################
# directories
########################################################################
OBJDIR     := obj

########################################################################
# flags
########################################################################
CXXFLAGS := -pipe -O2 -Wall -Werror -c -MD -MP

CFLAGS   := -pipe -O2 -Wall -Werror -c -MD -MP 

AFLAGS   := -pipe -Wall -Werror -c -MD -MP 

LDFLAGS  := 

########################################################################
# build targets
########################################################################
.PHONY : all
all: $(OBJDIR)/haiku

########################################################################
# build obj list
########################################################################
obj-y := main.cpp common/ radeon_hd/

########################################################################
# recursively construct the target
########################################################################
$(eval $(call add_obj))

########################################################################
# target
########################################################################
$(OBJDIR)/haiku: $(obj-core)
	@echo + ld $@
	@mkdir -p $(dir $@)
	$(V)$(LD) -o $@ $(LDFLAGS) $^

.PHONY : clean
clean:
	rm -rf $(OBJDIR)

########################################################################
# post include file
########################################################################
-include $(obj-core:.o=.d)





